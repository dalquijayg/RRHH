<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Autorizar Planillas - Recursos Humanos</title>
    <link rel="stylesheet" href="../Disenos/Planilla/AutorizarPlanillaParcial.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.0.19/sweetalert2.min.js"></script>
</head>
<body>
    <!-- Header Principal -->
    <header class="main-header">
        <div class="header-container">
            <!-- Columna izquierda: Logo y título -->
            <div class="header-brand">
                <img src="../Imagenes/Logo Recursos Humanos new.png" alt="Logo RRHH" class="header-logo">
                <div class="header-info">
                    <h1>Autorización de Planillas</h1>
                    <p>Gestión y autorización de planillas por período</p>
                </div>
            </div>
            
            <!-- Columna central: Información del usuario (se genera dinámicamente) -->
            <div class="header-center">
                <!-- Se llena automáticamente con JavaScript -->
            </div>
            
            <!-- Columna derecha: Fecha actual y estadísticas -->
            <div class="header-actions">
                <div class="current-date">
                    <i class="fas fa-calendar-day"></i>
                    <span id="currentDate"></span>
                </div>
                <div class="pending-stats" id="pendingStats" style="display: none;">
                    <div class="stats-badge">
                        <span class="stats-count" id="pendingCount">0</span>
                        <span class="stats-label">Pendientes</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Contenedor Principal -->
    <main class="main-container">
        <!-- Panel de Filtros y Controles -->
        <section class="controls-panel">
            <div class="controls-header">
                <h3><i class="fas fa-filter"></i> Filtros y Controles</h3>
            </div>
            <div class="controls-content">
                <!-- Filtros de búsqueda -->
                <div class="filter-section">
                    <div class="filter-group">
                        <label for="filterDepartment">Departamento</label>
                        <select id="filterDepartment" class="filter-control">
                            <option value="">Todos los departamentos</option>
                            <!-- Se llena dinámicamente -->
                        </select>
                    </div>
                </div>
                
                <!-- Acciones rápidas -->
                <div class="quick-actions">
                    <button type="button" id="refreshData" class="btn btn-secondary">
                        <i class="fas fa-sync-alt"></i>
                        Actualizar
                    </button>
                    <button type="button" id="clearFilters" class="btn btn-outline">
                        <i class="fas fa-times"></i>
                        Limpiar Filtro
                    </button>
                </div>
            </div>
        </section>

        <!-- Panel Principal de Planillas -->
        <section class="planillas-panel">
            <!-- Header del panel -->
            <div class="panel-header">
                <div class="panel-title">
                    <h3><i class="fas fa-file-invoice-dollar"></i> Planillas Pendientes de Autorización</h3>
                    <div class="panel-stats">
                        <span class="total-badge" id="totalPlanillas">0</span>
                        <span class="total-label">planillas encontradas</span>
                    </div>
                </div>
                <div class="panel-actions">
                    <div class="view-toggle">
                        <button type="button" id="listView" class="view-btn active" data-view="list">
                            <i class="fas fa-list"></i>
                        </button>
                        <button type="button" id="cardView" class="view-btn" data-view="card">
                            <i class="fas fa-th-large"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Contenido principal -->
            <div class="panel-content">
                <!-- Estado de carga -->
                <div class="loading-state" id="loadingState" style="display: none;">
                    <div class="loading-spinner"></div>
                    <p>Cargando planillas pendientes...</p>
                </div>

                <!-- Estado vacío -->
                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-icon">
                        <i class="fas fa-inbox"></i>
                    </div>
                    <h4>No hay planillas pendientes</h4>
                    <p>Todas las planillas de tus departamentos han sido procesadas o no hay planillas pendientes de autorización en este momento.</p>
                    <button type="button" id="refreshEmpty" class="btn btn-primary">
                        <i class="fas fa-sync-alt"></i>
                        Actualizar
                    </button>
                </div>

                <!-- Vista de lista -->
                <div class="list-view" id="listView-content">
                    <div class="planillas-table-container">
                        <table class="planillas-table" id="planillasTable">
                            <thead>
                                <tr>
                                    <th>Departamento</th>
                                    <th style="text-align: center;">Tipo</th>
                                    <th style="text-align: center;">Período</th>
                                    <th style="text-align: center;">Colaboradores</th>
                                    <th style="text-align: right;">Monto Total</th>
                                    <th style="text-align: center;">Fecha Registro</th>
                                    <th style="text-align: center;">Usuario</th>
                                    <th style="text-align: center;">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="planillasTableBody">
                                <!-- Filas dinámicas -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Vista de tarjetas -->
                <div class="card-view" id="cardView-content" style="display: none;">
                    <div class="planillas-cards-container" id="planillasCardsContainer">
                        <!-- Tarjetas dinámicas -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal de Detalle de Planilla -->
    <div class="modal-overlay" id="planillaDetailModal">
        <div class="modal-container modal-detail">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-file-alt"></i>
                    <h3>Detalle de Planilla</h3>
                </div>
                <div class="modal-planilla-info" id="modalPlanillaInfo">
                    <div class="planilla-type-badge" id="modalPlanillaBadge">Por Período</div>
                    <div class="planilla-period" id="modalPlanillaPeriod">01/08/2025 a 15/08/2025</div>
                </div>
                <button type="button" class="modal-close" id="closeDetailModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <!-- El contenido se genera dinámicamente con JavaScript -->
            </div>
            
            <div class="modal-footer">
                <div class="footer-info">
                    <div class="created-info">
                        <span class="info-label">Creada por:</span>
                        <span class="info-value" id="modalCreatedBy">Usuario</span>
                    </div>
                    <div class="created-date">
                        <span class="info-label">Fecha:</span>
                        <span class="info-value" id="modalCreatedDate">01/01/2025</span>
                    </div>
                </div>
                <div class="footer-actions">
                    <button type="button" id="rejectPlanilla" class="btn btn-danger">
                        <i class="fas fa-times-circle"></i>
                        Rechazar
                    </button>
                    <button type="button" id="authorizePlanilla" class="btn btn-success">
                        <i class="fas fa-check-circle"></i>
                        Autorizar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Fechas Trabajadas -->
    <div class="modal-overlay" id="workDatesModal">
        <div class="modal-container modal-dates">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-calendar-alt"></i>
                    <h3>Fechas Trabajadas</h3>
                </div>
                <div class="modal-employee-info" id="modalEmployeeInfo">
                    <span class="employee-name" id="modalEmployeeName">Nombre del Colaborador</span>
                </div>
                <button type="button" class="modal-close" id="closeWorkDatesModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="work-dates-content" id="workDatesContent">
                    <!-- Contenido dinámico de fechas trabajadas -->
                </div>
            </div>
        </div>
    </div>

    <script src="../Logica/Planillas/AutorizarPlanillaParcial.js"></script>
</body>
</html>